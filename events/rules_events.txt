
namespace = rules_events

country_event = { #Manpower Rule Setup
	id = rules_events.1
	title = rules_events.1.t
	desc = rules_events.1.d
	picture = KOBOLD_HOARD_eventPicture

	hidden = yes

	trigger = {
		AND = {
			manpower_percentage = 1.6
			NOT = {
				ai = yes
			}
		}
	}

	immediate = {
		set_variable = {
			which = manpowerRule1
			value = 0
		}

		export_to_variable = {
			which = manpowerRule1
			value = manpower
			who = ROOT
		}

		set_variable = {
			which = manpowerRule2
			value = 0
		}

		export_to_variable = {
			which = manpowerRule2
			value = max_manpower
		}
	}

	option = {
		name = rules_events.1.a
		country_event = {
			id = rules_events.2
			days = 1
		}
	}
}

country_event = { #Manpower Rule Execution
	id = rules_events.2
	title = rules_events.2.t
	desc = rules_events.2.d
	picture = LOOMING_DEATH_eventPicture

	is_triggered_only = yes

	option = {
		name = rules_events.2.a
		add_treasury = -1
		while = {
			limit = {
				check_variable = {
					which = manpowerRule1
					which = manpowerRule2
				}
			}
			add_manpower = -0.5
			export_to_variable = {
				which = manpowerRule1
				value = manpower
				who = ROOT
			}
		}
	}
}

country_event = {
	id = rules_events.3
	title = rules_events.3.t
	desc = rules_events.3.d
	picture = MULTI_RACIAL_MERC_eventPicture

	trigger = {
		AND = {
			OR = {
				has_mission = expand_country_mission
				has_mission = DADV_ally_in_the_dark
				has_mission = goblin_ingenuity
				has_mission = g_absorbing_the_disorganized_nezkaru
			}
			was_player = yes
			NOT = {
				ai = yes
			}
			age = age_of_discovery
		}
	}

	option = {
		name = rules_events.3.a
		if = {
			limit = {
				tag = B50
			}
			add_country_modifier = {
				name = mutagen_B50
				duration = -1
			}
		}
		else_if = {
			limit = {
				tag = U08
			}
			add_country_modifier = {
				name = mutagen_U08
				duration = -1
			}
		}
		else_if = {
			limit = {
				tag = H74
			}
			add_country_modifier = {
				name = mutagen_H74
				duration = -1
			}
		}
		else_if = {
			limit = {
				tag = H76
			}
			add_country_modifier = {
				name = mutagen_H76
				duration = -1
			}
		}
		else_if = {
			limit = {
				tag = Y76
			}
			add_country_modifier = {
				name = mutagen_Y76
				duration = -1
			}
		}
		else_if = {
			limit = {
				OR = {
					tag = V14
					tag = H80
				}
			}
			add_country_modifier = {
				name = mutagen_V14
				duration = -1
			}
		}
	}
}